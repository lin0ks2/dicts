/* ==========================================================
   Проект: MOYAMOVA
   Файл: theme.dark.css
   Назначение: Тёмная тема оформления приложения
   Версия: 1.1 (очистка дублей зоны 2)
   Обновлено: 2025-11-21
   ========================================================== */
/* ======================================================================================
   Dark Theme — Tokens & Overlays
   NOTE: Brand/Success/Danger colors are NOT changed here by agreement.
   ====================================================================================== */
:root[data-theme="dark"]{
  --focus-ring: color-mix(in srgb, var(--brand) 45%, rgba(255,255,255,.12));

  color-scheme: dark;

  background-color: #05070b;
  color: #e1e7f0;

  /* Core palette */
  --bg: #05070b;
  --bg-elevated: #05070b;
  --bg-soft: #05070b;
  --surface-0: #05070b;
  --surface-1: #0b121b;
  --surface-2: #141d27;
  --surface-3: #182433;
  --text: #dce2e8;
  --text-muted: #aeb6c0;
  --header-title: #e6e8eb;
  --border: #2a3a4d;
  --divider: #2f4156;

  /* Donate CTA borders (brand preserved) */
  --donate-mono-border:   #f7c948; /* yellow */
  --donate-paypal-border: #0b57d0; /* blue   */

  /* Completed sets (home) */
  --set-done-bg:     color-mix(in srgb, var(--brand) 16%, var(--surface-2));
  --set-done-border: color-mix(in srgb, var(--brand) 46%, var(--border));
  --set-done-badge-bg: color-mix(in srgb, var(--brand) 24%, #05070b);
  --set-done-badge-text: #fefce8;

  /* Cards */
  --card-bg: #0b121b;

  /* Shadows tuned for dark */
  --shadow-sm: 0 1px 2px rgba(0,0,0,.65);
  --shadow-md: 0 8px 16px rgba(0,0,0,.75);
  --shadow-lg: 0 18px 32px rgba(0,0,0,.82);

  /* Buttons */
  --btn-primary-bg: var(--brand);
  --btn-primary-text: #041018;
  --btn-primary-hover-bg: color-mix(in srgb, var(--brand) 80%, #ffffff 20%);
  --btn-solid-bg: #0f1a24;
  --btn-solid-border: #2a3a4d;
  --btn-solid-hover-bg: #151f2b;

  /* Badges / labels */
  --badge-bg: #151f2b;
  --badge-text: #dce2e8;
  --badge-muted-bg: #101825;
  --badge-muted-text: #aeb6c0;

  /* Input / fields */
  --input-bg: #05070b;
  --input-border: #2a3a4d;
  --input-focus-border: color-mix(in srgb, var(--brand) 60%, #ffffff 10%);
  --input-placeholder: #8690a0;

  /* Toggles / switches */
  --toggle-track: #121826;
  --toggle-thumb: #e6e8eb;

  /* Scrollbars */
  --scrollbar-track: #05070b;
  --scrollbar-thumb: #2a3a4d;

  /* Misc */
  --overlay-bg: rgba(0,0,0,.70);
}

/* Firefox scrollbar colors */
:root[data-theme="dark"]{
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/* WebKit scrollbars */
:root[data-theme="dark"] ::-webkit-scrollbar{
  width: 8px;
  height: 8px;
}
:root[data-theme="dark"] ::-webkit-scrollbar-track{
  background: var(--scrollbar-track);
}
:root[data-theme="dark"] ::-webkit-scrollbar-thumb{
  background: var(--scrollbar-thumb);
  border-radius: 4px;
}

/* Body background override for dark */
:root[data-theme="dark"] body{
  background-color: #05070b;
  color: var(--text);
}

/* Header / footer tweaks */
:root[data-theme="dark"] header.app-header{
  background: linear-gradient(to bottom, #05070b 0%, #05070b 30%, rgba(5,7,11,0) 100%);
  border-bottom-color: rgba(255,255,255,.04);
}
:root[data-theme="dark"] footer.app-footer{
  background: linear-gradient(to top, #05070b 0%, rgba(5,7,11,0) 100%);
  border-top-color: rgba(255,255,255,.04);
}

/* Cards / surfaces */
:root[data-theme="dark"] .card,
:root[data-theme="dark"] .home section.card{
  background: var(--card-bg);
  border-color: var(--border);
  box-shadow: var(--shadow-sm);
}

/* Text & muted text */
:root[data-theme="dark"] .text-muted{
  color: var(--text-muted);
}

/* Buttons */
:root[data-theme="dark"] .btn,
:root[data-theme="dark"] button{
  color: var(--text);
  background: var(--btn-solid-bg);
  border-color: var(--btn-solid-border);
}
:root[data-theme="dark"] .btn-primary,
:root[data-theme="dark"] button.btn-primary{
  background: var(--btn-primary-bg);
  color: var(--btn-primary-text);
}
:root[data-theme="dark"] .btn-primary:hover,
:root[data-theme="dark"] button.btn-primary:hover{
  background: var(--btn-primary-hover-bg);
}

/* Links */
:root[data-theme="dark"] a{
  color: var(--brand);
}

/* Inputs */
:root[data-theme="dark"] input[type="text"],
:root[data-theme="dark"] input[type="email"],
:root[data-theme="dark"] input[type="password"],
:root[data-theme="dark"] textarea{
  background: var(--input-bg);
  border-color: var(--input-border);
  color: var(--text);
}
:root[data-theme="dark"] input::placeholder,
:root[data-theme="dark"] textarea::placeholder{
  color: var(--input-placeholder);
}

/* Home header title */
:root[data-theme="dark"] .home-header h1{
  color: var(--header-title);
}

/* Stars / progress in header */
:root[data-theme="dark"] .header-stars .star{
  color: var(--text-muted);
}
:root[data-theme="dark"] .header-stars .star.active{
  color: var(--brand);
}

/* Zones separators / subtitles */
:root[data-theme="dark"] .zone-title{
  color: var(--text-muted);
}

/* trainer word */
:root[data-theme="dark"] .trainer-word{
  color: var(--header-title);
}

/* Set cards */
:root[data-theme="dark"] .home-sets .set-card{
  background: var(--surface-1);
  border-color: var(--border);
}
:root[data-theme="dark"] .home-sets .set-card.done{
  background: var(--set-done-bg);
  border-color: var(--set-done-border);
}
:root[data-theme="dark"] .home-sets .set-card.done .set-title{
  color: var(--set-done-badge-text);
}

/* Dict stats line */
:root[data-theme="dark"] .dict-stats{
  color: var(--text-muted);
}

/* Answer buttons */
:root[data-theme="dark"] .answers-grid button{
  background: var(--btn-solid-bg);
  border-color: var(--btn-solid-border);
  color: var(--text);
}
:root[data-theme="dark"] .answers-grid button.correct{
  border-color: var(--success);
}
:root[data-theme="dark"] .answers-grid button.incorrect{
  border-color: var(--danger);
}

/* IDK button */
:root[data-theme="dark"] .idk-btn{
  color: var(--text-muted);
}

/* Tabs / navigation pills */
:root[data-theme="dark"] .tabs-nav button{
  background: transparent;
  border-color: transparent;
  color: var(--text-muted);
}
:root[data-theme="dark"] .tabs-nav button.active{
  color: var(--header-title);
  border-bottom-color: var(--brand);
}

/* Dict table rows */
:root[data-theme="dark"] .dict-row{
  border-bottom-color: var(--divider);
}
:root[data-theme="dark"] .dict-row:hover{
  background: #0f1620;
}

/* Favorites / errors icons */
:root[data-theme="dark"] .dict-row .fav-toggle.active{
  color: #facc15;
}
:root[data-theme="dark"] .dict-row .err-toggle.active{
  color: #f97373;
}

/* Stats cards */
:root[data-theme="dark"] .stats-card{
  background: var(--surface-1);
  border-color: var(--border);
}

/* Settings switches */
:root[data-theme="dark"] .settings-item{
  border-bottom-color: var(--divider);
}

/* Modals */
:root[data-theme="dark"] .modal-backdrop{
  background: rgba(0,0,0,.7);
}
:root[data-theme="dark"] .modal{
  background: #05070b;
  border-color: var(--border);
}

/* Toasts / notifications */
:root[data-theme="dark"] .toast{
  background: #05070b;
  border-color: var(--border);
}

/* ==========================================================
 * ЗВЁЗДЫ В ШАПКЕ (ДАРК-СТИЛИ)
 * ========================================================== */

:root[data-theme="dark"] .header-stars{
  color: var(--text-muted);
}

:root[data-theme="dark"] .header-stars .star{
  font-size: 16px;
  opacity: .45;
}

:root[data-theme="dark"] .header-stars .star.active{
  opacity: 1;
}

/* ==========================================================
 * ЗОНА 2: Подсказки (ДАРК-ТЕМА)
 * ========================================================== */

:root[data-theme="dark"] .home-hints .hints-title{
  margin:0 0 6px;
  font-size:14px;
  text-align:left;      /* можно сделать center, если захочешь */
  font-weight:700;
  opacity:.8;
}

/* тело подсказки — фиксированная высота + скролл */
:root[data-theme="dark"] .home-hints .hints-body{
  /* важно: переопределяем старый flex */
  display:block;

  /* фиксированная высота блока */
  height:3.5em;                     /* подгони под вкус: 3.2–4em */

  overflow-y:auto;                  /* лишний текст прокручивается */
  -webkit-overflow-scrolling:touch; /* плавный скролл на iOS */

  text-align:center;
  opacity:.75;
  font-size:14px;
  line-height:1.4;
}

/* --- Подсказка: пример использования слова --- */
:root[data-theme="dark"] .home-hints .hint-example{
  width:100%;
}

:root[data-theme="dark"] .home-hints .hint-de,
:root[data-theme="dark"] .home-hints .hint-tr{
  margin:0;
  text-align:center;
}

/* Немецкий пример: чуть жирнее + кликабелен */
:root[data-theme="dark"] .home-hints .hint-de{
  font-weight:600;
  margin-bottom:2px;
  cursor:pointer;
}

/* Перевод по умолчанию скрыт */
:root[data-theme="dark"] .home-hints .hint-tr{
  opacity:.9;
  display:none;
}

/* Когда показан */
:root[data-theme="dark"] .home-hints .hint-tr.is-visible{
  display:block;
}

/* Подсветка тренируемого слова */
:root[data-theme="dark"] .home-hints .hint-word{
  font-weight:700;
  color:var(--brand,#35b6ff);
}

/* === MOYAMOVA modal (dark) === */
:root[data-theme="dark"] .mm-modal-open { overflow: hidden; }

:root[data-theme="dark"] .mm-modal-backdrop{
  position: fixed; inset: 0; z-index: 2147483646;
  display: grid; place-items: center;
  background: rgba(0,0,0,.36);
  backdrop-filter: blur(2px);
  opacity: 1; transition: opacity .18s ease;
}
:root[data-theme="dark"] .mm-modal-backdrop.hide{ opacity: 0; }

:root[data-theme="dark"] .mm-modal{
  width: min(92vw, 500px);
  background: rgba(20,30,50,.92);
  color: #fff;
  
  border-radius: 16px;
  box-shadow: 0 18px 40px rgba(0,0,0,.85);
  border: 1px solid rgba(255,255,255,.08);
  overflow: hidden;

  transform: translateY(0);
  opacity: 1;
  transition:
    opacity .18s ease,
    transform .18s ease;
}
:root[data-theme="dark"] .mm-modal.hide{
  opacity: 0;
  transform: translateY(18px);
}

:root[data-theme="dark"] .mm-modal-header{
  padding: 12px 16px 8px;
  background: linear-gradient(to right, rgba(53,182,255,.1), transparent);
  border-bottom: 1px solid rgba(255,255,255,.05);
}
:root[data-theme="dark"] .mm-modal-header h2{
  margin: 0;
  font-size: 17px;
  font-weight: 600;
  letter-spacing: .01em;
}

:root[data-theme="dark"] .mm-modal-body{
  padding: 12px 16px 16px;
  font-size: 14px;
  line-height: 1.5;
  color: #e3edf6;
}

:root[data-theme="dark"] .mm-modal-actions{
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  padding: 10px 16px 12px;
  border-top: 1px solid rgba(255,255,255,.05);
  background: radial-gradient(circle at top, rgba(255,255,255,.04), transparent 55%);
}

:root[data-theme="dark"] .mm-btn{
  padding: 6px 11px;
  font-size: 13px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(15,23,42,.86);
  color: #e5edf7;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
:root[data-theme="dark"] .mm-btn.primary{
  border-color: color-mix(in srgb, var(--brand) 70%, #ffffff 10%);
  background: radial-gradient(circle at top, color-mix(in srgb, var(--brand) 60%, #ffffff 20%), rgba(15,23,42,.92));
  color: #041019;
}
:root[data-theme="dark"] .mm-btn:hover{
  border-color: rgba(255,255,255,.28);
}
:root[data-theme="dark"] .mm-btn.primary:hover{
  border-color: color-mix(in srgb, var(--brand) 90%, #ffffff 14%);
  background: radial-gradient(circle at top, color-mix(in srgb, var(--brand) 75%, #ffffff 24%), rgba(15,23,42,.98));
}
:root[data-theme="dark"] .mm-btn .mm-kbd{
  padding: 2px 5px;
  border-radius: 4px;
  border: 1px solid rgba(148,163,184,.9);
  font-size: 11px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  text-transform: uppercase;
  letter-spacing: .08em;
  opacity: .9;
}
